const translations = {
    fr: {
      currentLang: "Français &#9662;",
      pageTitle: "Test des pensées",
      countdown: "Time : 2:00",
      question1: "Vous trouvez une clé dorée mystérieuse, où pensez-vous qu'elle mène ?",
      q1option1: "À un coffre au trésor",
      q1option2: "À une porte secrète",
      q1option3: "À une tour cachée",
      question2: "Vous découvrez une potion de transformation, quel animal choisissez-vous de devenir pour une journée ?",
      q2option1: "Un loup",
      q2option2: "Un aigle",
      q2option3: "Un dauphin",
      question3: "Une vieille carte au trésor indique un lieu caché, où se situe-t-il selon vous ?",
      q3option1: "Dans une montagne mystérieuse",
      q3option2: "Dans une grotte sous-marine",
      q3option3: "Au cœur d'une forêt dense",
      question4: "Vous rencontrez une créature mythique qui vous propose un souhait, que demandez-vous ?",
      q4option1: "La paix mondiale",
      q4option2: "La richesse immense",
      q4option3: "L'immortalité",
      question5: "Vous entrez dans un jardin magique, quelle plante attire votre attention en premier ?",
      q5option1: "Une fleur de feu",
      q5option2: "Une herbe de guérison",
      q5option3: "Un arbre à fruits d'or",
      question6: "Vous trouvez un message dans une bouteille sur la plage, que contient-il ?",
      q6option1: "Une carte au trésor",
      q6option2: "Une demande d'aide",
      q6option3: "Une prophétie ancienne",
      legalMentions: "Mentions légales",
      footerText: "Puzzle Key © 2024",
    },
    en: {
      currentLang: "English &#9662;",
      pageTitle: "Thoughts Test",
      countdown: "Time : 2:00",
      question1: "You find a mysterious golden key, where do you think it leads ?",
      q1option1: "To a treasure chest",
      q1option2: "To a secret door",
      q1option3: "To a hidden tower",
      question2: "You discover a transformation potion, what animal would you choose to become for a day ?",
      q2option1: "A wolf",
      q2option2: "An eagle",
      q2option3: "A dolphin",
      question3: "An old treasure map points to a hidden place, where is it located according to you ?",
      q3option1: "In a mysterious mountain",
      q3option2: "In an underwater cave",
      q3option3: "In the heart of a dense forest",
      question4: "You meet a mythical creature offering you one wish, what do you ask for ?",
      q4option1: "World peace",
      q4option2: "Immense wealth",
      q4option3: "Immortality",
      question5: "You enter a magical garden, which plant catches your eye first ?",
      q5option1: "A fire flower",
      q5option2: "A healing herb",
      q5option3: "A golden fruit tree",
      question6: "You find a message in a bottle on the beach, what does it contain ?",
      q6option1: "A treasure map",
      q6option2: "A call for help",
      q6option3: "An ancient prophecy",
      legalMentions: "Legal Mentions",
      footerText: "Puzzle Key © 2024",
    },
    es: {
      currentLang: "Español &#9662;",
      pageTitle: "Prueba de pensamientos",
      countdown: "Time : 2:00",
      question1: "Encuentras una llave dorada misteriosa, ¿ A dónde crees que conduce ?",
      q1option1: "A un cofre del tesoro",
      q1option2: "A una puerta secreta",
      q1option3: "A una torre escondida",
      question2: "Descubres una poción de transformación, ¿ En qué animal te convertirías por un día ?",
      q2option1: "Un lobo",
      q2option2: "Un águila",
      q2option3: "Un delfín",
      question3: "Un viejo mapa del tesoro indica un lugar oculto, ¿ Dónde crees que está ?",
      q3option1: "En una montaña misteriosa",
      q3option2: "En una cueva submarina",
      q3option3: "En el corazón de un bosque denso",
      question4: "Te encuentras con una criatura mítica que te ofrece un deseo, ¿ Qué pides ?",
      q4option1: "La paz mundial",
      q4option2: "Riqueza inmensa",
      q4option3: "Inmortalidad",
      question5: "Entras en un jardín mágico, ¿ Qué planta llama tu atención primero ?",
      q5option1: "Una flor de fuego",
      q5option2: "Una hierba curativa",
      q5option3: "Un árbol de frutas doradas",
      question6: "Encuentras un mensaje en una botella en la playa, ¿ Qué contiene ?",
      q6option1: "Un mapa del tesoro",
      q6option2: "Una llamada de auxilio",
      q6option3: "Una profecía antigua",
      legalMentions: "Aviso legal",
      footerText: "Puzzle Key © 2024",
    },
    it: {
      currentLang: "Italiano &#9662;",
      pageTitle: "Test dei pensieri",
      countdown: "Time : 2:00",
      question1: "Trovi una chiave d'oro misteriosa, dove pensi che conduca ?",
      q1option1: "A un forziere",
      q1option2: "A una porta segreta",
      q1option3: "A una torre nascosta",
      question2: "Scopri una pozione di trasformazione, in quale animale vorresti trasformarti per un giorno ?",
      q2option1: "Un lupo",
      q2option2: "Un'aquila",
      q2option3: "Un delfino",
      question3: "Una vecchia mappa del tesoro indica un luogo nascosto, dove si trova secondo te ?",
      q3option1: "In una montagna misteriosa",
      q3option2: "In una grotta sottomarina",
      q3option3: "Nel cuore di una foresta densa",
      question4: "Incontri una creatura mitica che ti offre un desiderio, cosa chiedi ?",
      q4option1: "La pace mondiale",
      q4option2: "Ricchezza immensa",
      q4option3: "L'immortalità",
      question5: "Entri in un giardino magico, quale pianta attira per prima la tua attenzione ?",
      q5option1: "Un fiore di fuoco",
      q5option2: "Un'erba curativa",
      q5option3: "Un albero di frutti d'oro",
      question6: "Trovi un messaggio in una bottiglia sulla spiaggia, cosa contiene ?",
      q6option1: "Una mappa del tesoro",
      q6option2: "Una richiesta di aiuto",
      q6option3: "Una profezia antica",
      legalMentions: "Note legali",
      footerText: "Puzzle Key © 2024",
    }
  };
  
  
// Récupération de la langue actuelle depuis le stockage local, par défaut le français
let currentLanguage = localStorage.getItem("language") || "fr";
const languageChangeSound = new Audio('sounds/transition-sound4.mp3');
languageChangeSound.volume = 1; // Valeur entre 0 et 1, ajustez selon vos préférences

// Fonction pour changer la langue
function changeLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem("language", lang); // Sauvegarder la langue choisie dans le stockage local
  updateContent(); // Met à jour tout le contenu avec la langue choisie
  updateDropdownButton(); // Met à jour le bouton du menu déroulant
  languageChangeSound.play(); // Nouveau son joué ici lors du changement de langue
}

// Fonction pour mettre à jour le contenu de la page en fonction de la langue sélectionnée
function updateContent() {
  const elements = document.querySelectorAll('[data-translate]'); // Sélectionne tous les éléments avec l'attribut data-translate

  elements.forEach((element) => {
    const key = element.getAttribute('data-translate'); // Récupère la clé de traduction de l'élément
    if (translations[currentLanguage][key]) { // Si une traduction existe pour la clé dans la langue choisie
      element.innerHTML = translations[currentLanguage][key]; // Met à jour le contenu de l'élément
    }
  });

  // Mettre à jour le titre de la page
  document.title = translations[currentLanguage].pageTitle;
}

// Fonction pour mettre à jour le texte du bouton de sélection de la langue
function updateDropdownButton() {
  const dropdownBtn = document.querySelector('.dropdown-btn'); // Sélectionne le bouton du menu déroulant
  dropdownBtn.innerHTML = translations[currentLanguage].currentLang; // Met à jour le texte du bouton avec la langue actuelle
}

// Ajout des événements de clic sur les options du menu déroulant pour changer la langue
document.querySelectorAll('.dropdown-content a').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault(); // Empêche l'action par défaut du lien
    const selectedLang = e.target.getAttribute('data-lang'); // Récupère la langue sélectionnée
    changeLanguage(selectedLang); // Change la langue
    // Met à jour la classe active pour indiquer la langue actuelle
    document.querySelectorAll('.dropdown-content a').forEach(a => a.classList.remove('active')); // Supprime la classe active de toutes les options
    e.target.classList.add('active'); // Ajoute la classe active à l'option sélectionnée
  });
});

// Initialiser le contenu et le bouton lors du chargement de la page
updateContent();
updateDropdownButton();
